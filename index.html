<!DOCTYPE html>

<head>
	<title>CastCade Testing</title>
	<meta charset="UTF-8">
	<script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
	<script src="https://code.createjs.com/createjs-2015.11.26.combined.js"></script>
	<script src="main.js"></script>
	<script src="ttt.js"></script>
	<script>
		function init() {

			dimensions = targetSize(20);

			var stage = new createjs.Stage("castcadeCanvas");
			
			var ttt = new TTT(stage, dimensions);
			ttt.createGrid();
			ttt.createSelector();
			
			/*
			ttt.drawO(ttt.tl.x, ttt.tl.y);
			ttt.drawX(ttt.tc.x, ttt.tc.y);
			ttt.drawO(ttt.tr.x, ttt.tr.y);
			ttt.drawX(ttt.cl.x, ttt.cl.y);
			ttt.drawO(ttt.cc.x, ttt.cc.y);
			ttt.drawX(ttt.cr.x, ttt.cr.y);
			ttt.drawO(ttt.bl.x, ttt.bl.y);
			ttt.drawX(ttt.bc.x, ttt.bc.y);
			ttt.drawO(ttt.br.x, ttt.br.y);
			*/

			ttt.selectorDown();
			ttt.selectorRight();

			prompt1 = drawText(0, 0, "Press WASD to move the cursor...");
			prompt2 = drawText(0, dimensions[1] - 48, "Press Space to toggle between Xs and Os");
			stage.addChild(prompt1);
			stage.addChild(prompt2);

			ttt.update();

			$("#globalContainer").keydown(
				function (event) {
					handleKeydown(event);
				}
			);

			function handleKeydown(event) {

				switch (event.which) {

					case 32:	// Space
						ttt.toggleState();
						break;

					case 37:	// Left
					case 65:	// a
						//console.log("PRESSED LEFT");
						ttt.selectorLeft();
						break;

					case 38:	// Up
					case 87:	// w
						//console.log("PRESSED UP");
						ttt.selectorUp();
						break;

					case 39:	// Right
					case 68:	// d
						//console.log("PRESSED RIGHT");
						ttt.selectorRight();
						break;

					case 40:	// Down
					case 83:	// s
						//console.log("PRESSED DOWN");
						ttt.selectorDown();
						break;

					default:
						//console.log("null was returned!");
						break;
				}

				ttt.update();
			}

		}
	</script>

</head>

<body id="globalContainer" onload="init();">
	<canvas id="castcadeCanvas"></canvas>
</body>

<script>

</script>

</html>
	